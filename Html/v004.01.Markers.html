<html>

<head>
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="css/marker.css">
	<link href='https://fonts.googleapis.com/css?family=Courier' rel='stylesheet'>
    <meta content="text/html; charset=UTF-8" http-equiv="content-type">
    <style type="text/css">
	</style>
</head>

<body id="body">
	<!-- configure Dojo -->
	<script>
		// Instead of using data-dojo-config, we're creating a dojoConfig
		// object *before* we load dojo.js; they're functionally identical,
		// it's just easier to read this approach with a larger configuration.
		var dojoConfig = {
			baseUrl: ".",
			async: true,
			// This code registers the correct location of the "demo"
			// package so we can load Dojo from the CDN whilst still
			// being able to load local modules
			packages: [
				{ name: "dojo", location: "../../bower_components/dojo" },
				{ name: "javascript", location: "javascript" }
			]
		};
	</script>
	<!-- load Dojo -->
	<script src="../../bower_components/dojo/dojo.js"></script>

    <script>
		require([
			'javascript/markers',
			'javascript/gameUtils',
		], function (markers, gameUtils, dojo) {

            var markerConfigs = [
              {
                    markerType: markers.markerTypes.Almond,
                    count: 4,
                },
                {
                    markerType: markers.markerTypes.Almond,
                    count: 4,
                },
                {
                    markerType: markers.markerTypes.Peanut,
                    count: 4,
                },
                {
                    markerType: markers.markerTypes.Pistachio,
                    count: 4,
                },
                {
                    markerType: markers.markerTypes.Salter,
                    count: 4,
                },
                {
                    markerType: markers.markerTypes.Squirrel,
                    count: 1,
                },
                {
                    markerType: markers.markerTypes.SquirrelHunger,
                    text: "Squirrel Hunger",
                    count: 1,
                    color: "#f0d0d0",
                },
                {
                    markerType: markers.markerTypes.StartingPlayer,
                    text: "Starting Player",
                    count: 1,
                    color: "#e0e0f0",
                },
            ]

            var numMarkerCards = 0
            for (var i = 0; i < markerConfigs.length; i++) {
                numMarkerCards += markerConfigs[i].count
            }

			function makeMarkerAtIndex(parent, index) {
                var config
                for (var i = 0; i < markerConfigs.length; i++) {
                    var markerConfig = markerConfigs[i]
                    if (index < markerConfig.count) {
                        config = markerConfig
                        break
                    }
                    index -= markerConfig.count
                }
                // Should have a config now.
				return markers.makeMarker(parent, markerConfig.markerType, null, markerConfig)
			}

			markers.makeMarkers(numMarkerCards, makeMarkerAtIndex)
		});
    </script>
</body>

</html>